C51 COMPILER V9.59.0.0   ADC                                                               12/13/2018 09:37:03 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE ADC
OBJECT MODULE PLACED IN .\output\ADC.obj
COMPILER INVOKED BY: E:\MDK\C51\BIN\C51.EXE c\ADC.c OPTIMIZE(8,SPEED) BROWSE NOINTPROMOTE INCDIR(.\h) DEBUG OBJECTEXTEND
                    - PRINT(.\list\ADC.lst) OBJECT(.\output\ADC.obj)

line level    source

   1          #include "adc.h"
   2          
   3          
   4          unsigned int AdcValue;
   5          
   6          void ADCwork(edAdcChannel Channel,unsigned char Clk)
   7          {
   8   1          unsigned int SetAdcIo; 
   9   1              ADCCON   = ADCCON & (~0X1F) | Channel | (Clk<<5) ;      //配置ADC输入通道和采集时钟频率
  10   1              ADCCON|=0x80;                                                              //打开ADC模块电源
  11   1              SetAdcIo = (0x0001 << Channel) & (~0Xfe00) ;   
  12   1              ADCCFG0  = (unsigned char)SetAdcIo;                        //配置为ADC输入
  13   1              ADCCFG1  = (unsigned char)(SetAdcIo >> 8);
  14   1      
  15   1              ADCCON|=0x40;                                                    //启动ADC采集
  16   1              while(!(ADCCON&0x10));                           //等待 ADC转换完成;
  17   1              //AdcValue=(ADCVH<<4)+(ADCVL>>4);
  18   1              AdcValue=(unsigned int)ADCVH;                                                    //ADC高8位存入8位寄存器
  19   1              AdcValue = (AdcValue<<4)+ADCVL;                      //取得adc的值
  20   1              AdcValue =  AdcValue>>4;
  21   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    101    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
